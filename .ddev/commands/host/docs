#!/bin/bash

## Description: Render TYPO3 documentation using render-guides
## Usage: docs [--clean]
## Example: ddev docs
## Example: ddev docs --clean

set -e

EXTENSION_PATH="$(dirname "$(dirname "$(dirname "$0")")")/.."
cd "$EXTENSION_PATH"

# Check for --clean flag
if [[ "$1" == "--clean" ]]; then
    echo "ğŸ§¹ Cleaning previous documentation build..."
    rm -rf Documentation-GENERATED-temp
fi

echo "ğŸ“š Rendering documentation..."
echo ""

docker run --rm \
    -v "$(pwd):/project" \
    -v "$(pwd)/Documentation-GENERATED-temp:/project/Documentation-GENERATED-temp" \
    ghcr.io/typo3-documentation/render-guides:latest \
    --config Documentation

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… Documentation rendered successfully!"
echo ""
echo "ğŸ“– View at: https://docs.nr-llm.ddev.site/"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
