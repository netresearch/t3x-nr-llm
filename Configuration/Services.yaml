# Service configuration for nr-llm extension
#
# This file defines dependency injection for AI/LLM services

services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  # ========================================
  # Namespace Auto-registration
  # ========================================

  Netresearch\NrLlm\:
    resource: '../Classes/*'
    exclude:
      - '../Classes/Domain/Model/*'
      - '../Classes/Provider/Exception/*'

  # ========================================
  # Core Services (PUBLIC)
  # ========================================

  Netresearch\NrLlm\Service\LlmServiceManager:
    public: true

  # ========================================
  # Providers (PUBLIC)
  # ========================================
  # All providers are registered via tags and auto-configured

  Netresearch\NrLlm\Provider\OpenAiProvider:
    public: true
    tags:
      - name: nr_llm.provider
        priority: 100

  Netresearch\NrLlm\Provider\ClaudeProvider:
    public: true
    tags:
      - name: nr_llm.provider
        priority: 90

  Netresearch\NrLlm\Provider\GeminiProvider:
    public: true
    tags:
      - name: nr_llm.provider
        priority: 80

  # ========================================
  # Provider Registry (handles auto-registration)
  # ========================================

  Netresearch\NrLlm\Provider\ProviderRegistry:
    public: false

  # ========================================
  # Feature Services (PUBLIC)
  # ========================================

  Netresearch\NrLlm\Service\Feature\CompletionService:
    public: true

  Netresearch\NrLlm\Service\Feature\VisionService:
    public: true

  Netresearch\NrLlm\Service\Feature\EmbeddingService:
    public: true

  Netresearch\NrLlm\Service\Feature\TranslationService:
    public: true

  # ========================================
  # Supporting Services (PUBLIC)
  # ========================================

  Netresearch\NrLlm\Service\PromptTemplateService:
    public: true

  Netresearch\NrLlm\Service\CacheManager:
    public: true
